<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>4. Corridor delineation • CRiSp</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="4. Corridor delineation">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">CRiSp</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/method.html">1. The method</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Preparation</h6></li>
    <li><a class="dropdown-item" href="../articles/getting-osm-data.html">2. Getting OSM data for delineation</a></li>
    <li><a class="dropdown-item" href="../articles/network-preparation.html">3. Preparing the network for delineation</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Delineation</h6></li>
    <li><a class="dropdown-item" href="../articles/corridor-delineation.html">4. Corridor delineation</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/CityRiverSpaces/crisp/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>4. Corridor delineation</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/CityRiverSpaces/crisp/blob/main/vignettes/corridor-delineation.Rmd" class="external-link"><code>vignettes/corridor-delineation.Rmd</code></a></small>
      <div class="d-none name"><code>corridor-delineation.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://cityriverspaces.github.io/CRiSp/">CRiSp</a></span><span class="op">)</span></span></code></pre></div>
<p>In this notebook we explore how to delineate an urban river corridor
using river Dâmbovița in Bucharest, Romania’s capital, as the study
area. We will use OpenStreetMap (OSM) data, first from the Overpass API
and then from a local file.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">city_name</span> <span class="op">&lt;-</span> <span class="st">"Bucharest, Romania"</span>   <span class="co"># Be specific and spell as in OSM</span></span>
<span><span class="va">river_name</span> <span class="op">&lt;-</span> <span class="st">"Dâmbovița"</span>           <span class="co"># Spell as in OSM</span></span>
<span><span class="va">bbox_buffer</span> <span class="op">&lt;-</span> <span class="fl">2000</span>                 <span class="co"># Buffer distance in meters</span></span></code></pre></div>
<p>We start by demonstrating the use of the all-in-one
<code><a href="../reference/delineate_corridor.html">delineate_corridor()</a></code> function which does the following
three steps:</p>
<ol style="list-style-type: decimal">
<li><p>Fetches city boundary, street and rail network, as well as river
centreline and surface data from the <a href="https://wiki.openstreetmap.org/wiki/Overpass_API" class="external-link">Overpass API</a>
as shown in <code><a href="../articles/getting-osm-data.html">vignette("getting-osm-data")</a></code>;</p></li>
<li><p>Pre-processes the street and rail network for delineation as in
<code><a href="../articles/network-preparation.html">vignette("network-preparation")</a></code></p></li>
<li><p>Constructs the initial corridor based on the chosen method. If
the <code>method = "buffer"</code> is chosen, the corridor is
constructed by buffering the river centreline and surface data with a
given buffer distance. If the <code>method = "dem"</code> is chosen
instead, the Cost Distance Accumulation algorithm is used to delineate
the corridor based on the digital elevation model (DEM) of the area
retrieved from the <a href="https://element84.com/earth-search/" class="external-link">Earth
Search API</a>.</p></li>
<li><p>Delineates the corridor based on the pre-processed network and
initial corridor. Optionally, the corridor is split into segments based
on the network and the river space is delineated.</p></li>
</ol>
<p>The <code><a href="../reference/delineate_corridor.html">delineate_corridor()</a></code> function carries out the above
steps in one and returns a list that by default contains the following
output elements: <code>corridor</code>, <code>segments</code>, and
<code>riverspace</code>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># TODO remove eval=FALSE after segment and riverspace delineation are</span></span>
<span><span class="co"># implemented and the delineate_corridor() function is updated to return a list</span></span>
<span><span class="va">bucharest_dambovita</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/delineate_corridor.html">delineate_corridor</a></span><span class="op">(</span></span>
<span>  <span class="va">city_name</span>,</span>
<span>  <span class="va">river_name</span>,</span>
<span>  bbox_buffer <span class="op">=</span> <span class="va">bbox_buffer</span>,</span>
<span>  initial_method <span class="op">=</span> <span class="st">"buffer"</span>,</span>
<span>  capping_method <span class="op">=</span> <span class="st">"direct"</span>,</span>
<span>  segments <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  riverspace <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># `$corridor` of the resulting object is an sf polygon representing the corridor</span></span>
<span><span class="va">bucharest_dambovita</span><span class="op">$</span><span class="va">corridor</span></span>
<span></span>
<span><span class="co"># `$segments` is an sf polygon representing the segments of the corridor</span></span>
<span><span class="va">bucharest_dambovita</span><span class="op">$</span><span class="va">segments</span></span>
<span></span>
<span><span class="co"># `$riverspace` is an sf polygon representing the delineated river space</span></span>
<span><span class="va">bucharest_dambovita</span><span class="op">$</span><span class="va">riverspace</span></span>
<span></span>
<span><span class="co"># All three elements of delineation</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">urc</span><span class="op">$</span><span class="va">riverspace</span>, col <span class="op">=</span> <span class="st">"green"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">urc</span><span class="op">$</span><span class="va">river</span>, col <span class="op">=</span> <span class="st">"blue"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">urc</span><span class="op">$</span><span class="va">segments</span>, col <span class="op">=</span> <span class="st">"lightblue"</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">urc</span><span class="op">$</span><span class="va">corridor</span>, add <span class="op">=</span> <span class="cn">TRUE</span>, col <span class="op">=</span> <span class="st">"red"</span>, wt <span class="op">=</span> <span class="fl">2</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
  </main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Claudiu Forgaci, Francesco Nattino, Netherlands eScience Center.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
